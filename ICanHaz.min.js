(function(){var m=function(){function d(a){return(""+a).replace(/&(?!\w+;)|[<>"']/g,function(a){return h[a]||a})}var b=Object.prototype.toString;Array.isArray=Array.isArray||function(a){return"[object Array]"==b.call(a)};var j=String.prototype.trim,f;if(j)f=function(a){return null==a?"":j.call(a)};else{var i,n;/\S/.test("\u00a0")?(i=/^[\s\xA0]+/,n=/[\s\xA0]+$/):(i=/^\s+/,n=/\s+$/);f=function(a){return a==null?"":a.toString().replace(i,"").replace(n,"")}}var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;",
"'":"&#39;"},m={},p=function(){};p.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":!0},context:{},render:function(a,e,c,g){g||(this.context=e,this.buffer=[]);if(this.includes("",a)){var a=this.render_pragmas(a),k=this.render_section(a,e,c);!1===k&&(k=this.render_tags(a,e,c,g));if(g)return k;this.sendLines(k)}else{if(g)return a;this.send(a)}},send:function(a){""!==a&&this.buffer.push(a)},sendLines:function(a){if(a)for(var a=a.split("\n"),e=0;e<a.length;e++)this.send(a[e])},
render_pragmas:function(a){if(!this.includes("%",a))return a;var e=this,c=this.getCachedRegex("render_pragmas",function(a,e){return RegExp(a+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+e,"g")});return a.replace(c,function(a,c,d){if(!e.pragmas_implemented[c])throw{message:"This implementation of mustache doesn't understand the '"+c+"' pragma"};e.pragmas[c]={};d&&(a=d.split("="),e.pragmas[c][a[0]]=a[1]);return""})},render_partial:function(a,e,c){a=f(a);if(!c||void 0===c[a])throw{message:"unknown_partial '"+a+"'"};
return!e||"object"!=typeof e[a]?this.render(c[a],e,c,!0):this.render(c[a],e[a],c,!0)},render_section:function(a,e,c){if(!this.includes("#",a)&&!this.includes("^",a))return!1;var g=this,k=this.getCachedRegex("render_section",function(a,c){return RegExp("^([\\s\\S]*?)"+a+"(\\^|\\#)\\s*(.+)\\s*"+c+"\n*([\\s\\S]*?)"+a+"\\/\\s*\\3\\s*"+c+"\\s*([\\s\\S]*)$","g")});return a.replace(k,function(a,k,d,b,f,i){var a=k?g.render_tags(k,e,c,!0):"",i=i?g.render(i,e,c,!0):"",o,b=g.find(b,e);"^"===d?o=!b||Array.isArray(b)&&
0===b.length?g.render(f,e,c,!0):"":"#"===d&&(o=Array.isArray(b)?g.map(b,function(a){return g.render(f,g.create_context(a),c,!0)}).join(""):g.is_object(b)?g.render(f,g.create_context(b),c,!0):"function"==typeof b?b.call(e,f,function(a){return g.render(a,e,c,!0)}):b?g.render(f,e,c,!0):"");return a+o+i})},render_tags:function(a,e,c,g){for(var b=this,f=function(){return b.getCachedRegex("render_tags",function(a,c){return RegExp(a+"(=|!|>|&|\\{|%)?([^#\\^]+?)\\1?"+c+"+","g")})},i=f(),j=function(a,g,h){switch(g){case "!":return"";
case "=":return b.set_delimiters(h),i=f(),"";case ">":return b.render_partial(h,e,c);case "{":case "&":return b.find(h,e);default:return d(b.find(h,e))}},a=a.split("\n"),h=0;h<a.length;h++)a[h]=a[h].replace(i,j,this),g||this.send(a[h]);if(g)return a.join("\n")},set_delimiters:function(a){a=a.split(" ");this.otag=this.escape_regex(a[0]);this.ctag=this.escape_regex(a[1])},escape_regex:function(a){arguments.callee.sRE||(arguments.callee.sRE=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\)",
"g"));return a.replace(arguments.callee.sRE,"\\$1")},find:function(a,e){function c(a){return!1===a||0===a||a}var a=f(a),g;if(a.match(/([a-z_]+)\./ig)){var b=this.walk_context(a,e);c(b)&&(g=b)}else c(e[a])?g=e[a]:c(this.context[a])&&(g=this.context[a]);return"function"==typeof g?g.apply(e):void 0!==g?g:""},walk_context:function(a,e){for(var c=a.split("."),b=void 0!=e[c[0]]?e:this.context,d=b[c.shift()];void 0!=d&&0<c.length;)b=d,d=d[c.shift()];return"function"==typeof d?d.apply(b):d},includes:function(a,
b){return-1!=b.indexOf(this.otag+a)},create_context:function(a){if(this.is_object(a))return a;var b=".";this.pragmas["IMPLICIT-ITERATOR"]&&(b=this.pragmas["IMPLICIT-ITERATOR"].iterator);var c={};c[b]=a;return c},is_object:function(a){return a&&"object"==typeof a},map:function(a,b){if("function"==typeof a.map)return a.map(b);for(var c=[],g=a.length,d=0;d<g;d++)c.push(b(a[d]));return c},getCachedRegex:function(a,b){var c=m[this.otag];c||(c=m[this.otag]={});var d=c[this.ctag];d||(d=c[this.ctag]={});
(c=d[a])||(c=d[a]=b(this.otag,this.ctag));return c}};return{name:"mustache.js",version:"0.4.0",to_html:function(a,b,c,d){var f=new p;d&&(f.send=d);f.render(a,b||{},c);if(!d)return f.buffer.join("\n")}}}();(function(){var d={VERSION:"0.10",templates:{},$:"undefined"!==typeof window?window.jQuery||window.Zepto||null:null,addTemplate:function(b,j){if("object"===typeof b)for(var f in b)this.addTemplate(f,b[f]);else d[b]?console.error("Invalid name: "+b+"."):d.templates[b]?console.error('Template "'+b+
'  " exists'):(d.templates[b]=j,d[b]=function(f,j){var f=f||{},h;"undefined"!=typeof Handlebars&&("undefined"==typeof m||d.useHandlebars)?h=Handlebars.compile(d.templates[b])(f,{partials:d.templates}):m&&(h=m.to_html(d.templates[b],f,d.templates));return d.$&&!j?d.$(h):h})},clearAll:function(){for(var b in d.templates)delete d[b];d.templates={}},refresh:function(){d.clearAll();d.grabTemplates()},grabTemplates:function(){var b,j=document.getElementsByTagName("script"),f,i=[];b=0;for(l=j.length;b<l;b++)if((f=
j[b])&&f.innerHTML&&f.id&&("text/html"===f.type||"text/x-icanhaz"===f.type))d.addTemplate(f.id,"".trim?f.innerHTML.trim():f.innerHTML.replace(/^\s+/,"").replace(/\s+$/,"")),i.unshift(f);b=0;for(l=i.length;b<l;b++)i[b].parentNode.removeChild(i[b])}};"undefined"!==typeof require?module.exports=d:window.ich=d;"undefined"!==typeof document&&(d.$?d.$(function(){d.grabTemplates()}):document.addEventListener("DOMContentLoaded",function(){d.grabTemplates()},!0))})()})();
